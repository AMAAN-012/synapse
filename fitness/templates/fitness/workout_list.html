{% extends 'fitness/fitness_base.html' %}
<style>
    @keyframes pulse-flame {
        0%, 100% {
            transform: scale(1);
            opacity: 1;
        }
        50% {
            transform: scale(1.1);
            opacity: 0.9;
        }
    }
    .animate-pulse-flame {
        animation: pulse-flame 3s ease-in-out infinite;
    }

    @keyframes move-blob-1 {
        0%, 100% { transform: translateY(-20px) translateX(10px); }
        50% { transform: translateY(20px) translateX(-10px); }
    }
    @keyframes move-blob-2 {
        0%, 100% { transform: translateY(15px) translateX(-25px); }
        50% { transform: translateY(-15px) translateX(25px); }
    }
    .animate-move-blob-1 {
        animation: move-blob-1 8s ease-in-out infinite;
    }
    .animate-move-blob-2 {
        animation: move-blob-2 10s ease-in-out infinite reverse;
    }
</style>

{% block title %}My Workouts{% endblock %}

{% block content %}
<div class="flex flex-col md:flex-row gap-8">

    <div class="flex-grow">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-4xl font-bold text-white">My Workouts</h1>
            <a href="{% url 'fitness:add_workout' %}" class="bg-lime-500 hover:bg-lime-600 text-slate-900 font-bold py-2 px-4 rounded-lg shadow-md transition duration-300">
                + Add New Workout
            </a>
        </div>

        <div class="space-y-4">
            {% for workout in workouts %}
                <div class="bg-slate-800 rounded-lg shadow-lg p-5 border-l-4 border-lime-400">
                    <div class="flex justify-between items-center">
                        <div>
                            <h2 class="text-2xl font-semibold text-lime-400">{{ workout.exercise_name }}</h2>
                            <p class="text-slate-400">{{ workout.date|date:"F j, Y" }}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-lg"><span class="font-bold">{{ workout.sets }}</span> sets x <span class="font-bold">{{ workout.reps }}</span> reps</p>
                            {% if workout.weight_kg %}
                                <p class="text-slate-300">{{ workout.weight_kg }} kg</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="bg-slate-800 rounded-lg p-8 text-center">
                    <p class="text-slate-400">You haven't logged any workouts yet. Get started!</p>
                </div>
            {% endfor %}
        </div>
    </div>

    <div class="md:w-1/3 lg:w-1/4 flex-shrink-0">
        {% if streak_count > 0 %}
        <div class="relative rounded-2xl overflow-hidden shadow-2xl">
            <div class="absolute top-0 left-0 w-full h-full">
                <div class="absolute -top-10 -left-10 w-48 h-48 bg-orange-500 rounded-full opacity-50 filter blur-2xl animate-move-blob-1"></div>
                <div class="absolute -bottom-10 -right-10 w-48 h-48 bg-red-500 rounded-full opacity-40 filter blur-2xl animate-move-blob-2"></div>
            </div>

            <div class="relative bg-white/10 backdrop-blur-lg p-6 text-white text-center flex flex-col items-center border border-white/20">
                <div class="text-6xl mb-2 animate-pulse-flame">
                    <span>ðŸ”¥</span>
                </div>
                <div class="text-7xl font-extrabold tracking-tight" style="text-shadow: 0 0 15px rgba(255,165,0,0.5);">
                    {{ streak_count }}
                </div>
                <div class="text-xl font-semibold mb-2">
                    Day Streak
                </div>
                <p class="text-sm text-slate-300">
                    Keep the fire burning.
                </p>
            </div>
        </div>
        {% endif %}
    </div>

</div>
{% endblock %}